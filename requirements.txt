# Core API packages
fastapi==0.121.1
uvicorn==0.38.0
python-multipart==0.0.20  # Security fix: CVE-2024-24762 (DoS vulnerabilities)
pydantic==2.12.4

# Data processing
numpy==1.26.4  # LOCKED: PyTorch 2.6.0 incompatible with NumPy 2.x (torch.from_numpy() bug)
safetensors==0.6.2
Pillow==12.0.0  # Note: Wheels 3-5x larger than v11

# PyTorch (stable, no upgrade needed)
torch==2.6.0

# Transformers ecosystem
transformers==4.51.0  # Compatible with optimum 1.25.x + sentence-transformers 5.1.2
sentence-transformers==5.1.2  # Warning: v5.1+ raises error on unused kwargs in encode()
model2vec==0.7.0  # Numpy-only inference, quantization support

# Quantization packages (4-bit for Qwen3 reranker)
bitsandbytes==0.48.2  # Requires PyTorch 2.3+ (compatible with 2.6.0)
accelerate==1.10.0  # FSDP2, FP8 support

# ONNX Runtime for optimized CPU inference (VL classifier)
# Note: Keeping optimum 1.25.x for stability (v2.0 has major breaking changes in ONNX integration)
optimum[onnxruntime]>=1.25.0
onnxruntime==1.23.2  # Requires numpy<2.0 (incompatible with NumPy 2.x)

# MTEB for model evaluation (optional, dev only)
# mteb==1.18.0

